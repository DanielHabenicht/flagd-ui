@if (globalLoading.isLoading()) {
  <mat-progress-bar mode="indeterminate" class="global-loading-bar"></mat-progress-bar>
}

<mat-sidenav-container
  class="app-shell"
  (dragover)="onDragOver($event)"
  (dragleave)="onDragLeave($event)"
  (drop)="onDrop($event)"
  [class.drag-active]="dragOver"
>
  <mat-sidenav
    [mode]="isCompactLayout() ? 'over' : 'side'"
    [opened]="isCompactLayout() ? navOpen() : true"
    (openedChange)="onNavigationStateChange($event)"
    class="sidebar"
  >
    <mat-toolbar>
      <div class="sidebar-header-row">
        <h1><a routerLink="/" class="home-link">flagd-ui</a></h1>
        <button
          mat-icon-button
          type="button"
          class="theme-mode-button"
          (click)="cycleThemeMode()"
          [attr.aria-label]="themeModeLabel()"
          [title]="themeModeLabel() + ' (click to cycle auto/dark/light)'"
        >
          <mat-icon>{{ themeModeIcon() }}</mat-icon>
        </button>
      </div>
    </mat-toolbar>
    <app-project-list />
  </mat-sidenav>
  <mat-sidenav-content class="main-content">
    @if (isCompactLayout()) {
      <div class="page-header-nav">
        <button
          mat-icon-button
          class="nav-toggle-button"
          type="button"
          (click)="toggleNavigation()"
          title="Toggle navigation"
          aria-label="Toggle navigation"
        >
          <mat-icon>menu</mat-icon>
        </button>
      </div>
    }
    <router-outlet />
  </mat-sidenav-content>
</mat-sidenav-container>
