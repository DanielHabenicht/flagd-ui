<div class="project-list">
  <div class="project-content">
    @if (store.fileGroups().length) {
      @for (group of store.fileGroups(); track group.label) {
        <div class="group-header">
          <mat-icon class="group-icon">{{ group.icon }}</mat-icon>
          <span class="group-label">{{ group.label }}</span>
        </div>
        <mat-nav-list class="group-list">
          @for (entry of group.entries; track entry.name + entry.backendUrl) {
            <a mat-list-item [routerLink]="getProjectRoute(entry)" routerLinkActive="active-link">
              <span matListItemTitle class="project-name">{{ entry.name }}</span>
              <button mat-icon-button matListItemMeta (click)="deleteProject($event, entry)" title="Delete" class="btn-delete">
                <mat-icon>close</mat-icon>
              </button>
            </a>
          }
        </mat-nav-list>
      }
    } @else {
      <div class="empty-state">
        @if (store.loading()) {
          <span>Loading...</span>
        } @else {
          <span>No flag files yet</span>
        }
      </div>
    }
  </div>

  <div class="sidebar-footer">
    <mat-divider></mat-divider>
    <div class="footer-actions">
      <div class="drop-hint">
        <mat-icon class="drop-hint-icon">upload_file</mat-icon>
        <span>Drop <code>.flagd.json</code> files anywhere or</span>
      </div>
      <button mat-flat-button class="new-flag-button" (click)="openNewProjectDialog()" title="Add flag file">
        <mat-icon>add</mat-icon>
        <span>Create flag file</span>
      </button>
    </div>
  </div>
</div>
