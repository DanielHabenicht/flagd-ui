<div class="project-list"
     (dragover)="onDragOver($event)"
     (dragleave)="onDragLeave($event)"
     (drop)="onDrop($event)"
     [class.drag-active]="dragOver">
  <div class="list-header">
    <span class="list-title">Flag Files</span>
    <button mat-icon-button (click)="openNewProjectDialog()" title="Add flag file">
      <mat-icon>add</mat-icon>
    </button>
  </div>

  <mat-divider></mat-divider>

  @if (store.fileGroups().length) {
    @for (group of store.fileGroups(); track group.label) {
      <div class="group-header">
        <mat-icon class="group-icon">{{ group.icon }}</mat-icon>
        <span class="group-label">{{ group.label }}</span>
      </div>
      <mat-nav-list class="group-list">
        @for (entry of group.entries; track entry.name + entry.backendUrl) {
          <a mat-list-item [routerLink]="getProjectRoute(entry)" routerLinkActive="active-link">
            <span matListItemTitle class="project-name">{{ entry.name }}</span>
            <button mat-icon-button matListItemMeta (click)="deleteProject($event, entry)" title="Delete" class="btn-delete">
              <mat-icon>close</mat-icon>
            </button>
          </a>
        }
      </mat-nav-list>
    }
  } @else {
    <div class="empty-state">
      @if (store.loading()) {
        <span>Loading...</span>
      } @else {
        <span>No flag files yet</span>
      }
    </div>
  }

  <div class="drop-hint">
    <mat-icon class="drop-hint-icon">upload_file</mat-icon>
    <span>Drop <code>.flagd.json</code> files here</span>
  </div>
</div>
