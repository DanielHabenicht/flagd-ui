<div class="project-list">
  <div class="list-header">
    <span class="list-title">Projects</span>
    <button mat-icon-button (click)="toggleCreateForm()" title="New project">
      <mat-icon>add</mat-icon>
    </button>
  </div>

  @if (showCreateForm) {
    <form class="create-form" (ngSubmit)="createProject()">
      <mat-form-field appearance="outline" class="create-field">
        <mat-label>Project name</mat-label>
        <input matInput [(ngModel)]="newProjectName" name="projectName" placeholder="project-name" autofocus />
      </mat-form-field>
      <div class="create-actions">
        <button mat-flat-button color="primary" type="submit" [disabled]="!newProjectName.trim()">Create</button>
        <button mat-button type="button" (click)="toggleCreateForm()">Cancel</button>
      </div>
    </form>
  }

  <mat-divider></mat-divider>

  <mat-nav-list>
    @for (project of store.projects(); track project) {
      <a mat-list-item [routerLink]="['/projects', project]" routerLinkActive="active-link">
        <span matListItemTitle class="project-name">{{ project }}</span>
        <button mat-icon-button matListItemMeta (click)="deleteProject($event, project)" title="Delete project" class="btn-delete">
          <mat-icon>close</mat-icon>
        </button>
      </a>
    } @empty {
      <div class="empty-state">
        @if (store.loading()) {
          <span>Loading...</span>
        } @else {
          <span>No projects yet</span>
        }
      </div>
    }
  </mat-nav-list>
</div>
